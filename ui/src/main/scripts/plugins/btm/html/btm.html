<div class="col-md-12" ng-controller="BTM.BTMController">
  <div class="text-center hk-urls-list hk-spinner-container" ng-hide="businessTransactions">
    <div class="spinner spinner-lg"></div>
    <p class="hk-spinner-legend-below">Loading...</p>
  </div>

  <div class="row" ng-show="businessTransactions" >
    <hawkular-subtab class="hk-align-center">
      <div class="hk-nav-tabs-container">
        <ul class="nav nav-tabs nav-tabs-pf">
          <li class="active"><a href="/hawkular-ui/btm" >Active</a></li>
          <li><a href="/hawkular-ui/btm/candidates">Candidates <i class="fa fa-flag" ng-hide="candidateCount === 0"></i></a></li>
          <li><a href="/hawkular-ui/btm/disabled">Disabled</a></li>
          <li><a href="/hawkular-ui/btm/ignored">Ignored</a></li>
        </ul>
      </div>
    </hawkular-subtab>

    <section id="active" class="hk-tab-content">

      <div class="col-md-12">
        <ul class="list-group" >
          <br/>
          <div class="row" >
            Search: <input ng-model="query.name"/>

            <label style="width: 5%" ></label> <!-- TODO: Must be a better way -->
            <label for="chartType" style="width: 3%" >Chart:</label>
            <select name="chartType" ng-model="chart" style="width: 10%">
              <option value="TxnCount">Transaction Count</option>
              <option value="FaultCount">Fault Count</option>
              <option value="None">None</option>
            </select>
          </div>

          <div class="hk-txn-item col-md-6" ng-hide="chart === 'None'" >
            <div id="btxntxncountpiechart" ng-show="chart === 'TxnCount'"></div>
            <div id="btxnfaultcountpiechart" ng-show="chart === 'FaultCount'"></div>
          </div>

          <div class="hk-txn-item col-md-6" ng-repeat="btxn in businessTransactions | filter:query track by btxn.name" ng-show="btxn.level === 'All'">
            <div class="panel panel-default hk-txn-heading">
              <a href="/hawkular-ui/btm/info/{{btxn.name}}">{{btxn.name}}</a>
              <span class="hk-settings pull-right">
                <a href="/hawkular-ui/btm/config/{{btxn.name}}" ><i class="fa fa-cog"></i></a>
                <a href="#" ng-click="deleteBusinessTxn(btxn)"><i class="fa fa-trash-o"></i></a>
              </span>
            </div>

            <div class="panel panel-default hk-summary" ng-show="btxn.level === 'All'">
              <div class="row">
                <div class="col-sm-3 hk-summary-item">
                  <a href="/hawkular-ui/btm/info/{{btxn.name}}">
                    <span class="hk-data" ng-show="btxn.count !== undefined">{{btxn.count}}</span>
                    <span class="hk-data spinner" ng-hide="btxn.count !== undefined" popover="Your data is being collected. You should see something in a few seconds." popover-trigger="mouseenter" popover-placement="bottom"></span>
                    <span class="hk-item">Transactions (per hour)</span>
                  </a>
                </div>
                <div class="col-sm-3 hk-summary-item">
                  <a href="/hawkular-ui/btm/info/{{btxn.name}}">
                    <span class="hk-data" ng-show="btxn.percentile95 !== undefined">{{btxn.percentile95}}</span>
                    <span class="hk-data spinner" ng-hide="btxn.percentile95 !== undefined" popover="Your data is being collected. You should see something in a few seconds." popover-trigger="mouseenter" popover-placement="bottom"></span>
                    <span class="hk-item">Completion (secs 95%)</span>
                  </a>
                </div>
                <div class="col-sm-3 hk-summary-item">
                  <a href="/hawkular-ui/btm/info/{{btxn.name}}">
                    <span class="hk-data" ng-show="btxn.faultcount !== undefined">{{btxn.faultcount}}</span>
                    <span class="hk-data spinner" ng-hide="btxn.faultcount !== undefined" popover="Your data is being collected. You should see something in a few seconds." popover-trigger="mouseenter" popover-placement="bottom"></span>
                    <span class="hk-item">Faults</span>
                  </a>
                </div>
                <div class="col-sm-3 hk-summary-item">
                  <a href="/hawkular-ui/btm/info/{{btxn.name}}">
                    <span class="hk-data" ng-show="btxn.alerts !== undefined">{{btxn.alerts}} <i class="fa fa-flag" ng-show="btxn.alerts > 0"></i></span>
                    <span class="hk-data spinner" ng-hide="btxn.alerts !== undefined" popover="Your data is being collected. You should see something in a few seconds." popover-trigger="mouseenter" popover-placement="bottom"></span>
                    <span class="hk-item">Alerts</span>
                  </a>
                </div>
              </div>

            </div>

          </div>
        </ul>
      </div>
    </section>
  </div>
</div>

