{
  "instrumentation": {
    "apache-camel": {
      "description": "Apache Camel instrumentation",
      "version": "1",
      "rules": [{
        "ruleName": "Apache Camel Inbound Component Start",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeCreated",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange"
        ],
        "location": "ENTRY",
        "condition": "!isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.seda.SedaEndpoint.class)",
        "actions": [{
          "type": "InstrumentComponent",
          "direction": "Request",
          "componentTypeExpression": "removeSuffix(simpleClassName($2.getFromEndpoint()),\"Endpoint\")",
          "uriExpression": "$2.getFromEndpoint().getEndpointUri()"
        },{
          "type": "FreeFormAction",
          "action": "collector().setDetail(\"btm_source\",\"apache-camel\")"
        }]
      },{
        "ruleName": "Apache Camel Inbound Component End",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeDone",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange"
        ],
        "location": "ENTRY",
        "condition": "!isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.seda.SedaEndpoint.class)",
        "actions": [{
          "type": "InstrumentComponent",
          "direction": "Response",
          "componentTypeExpression": "removeSuffix(simpleClassName($2.getFromEndpoint()),\"Endpoint\")",
          "uriExpression": "$2.getFromEndpoint().getEndpointUri()"
        }]
      },{
        "ruleName": "Apache Camel Outbound Component Start",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeSending",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange",
           "org.apache.camel.Endpoint"
        ],
        "location": "ENTRY",
        "condition": "!isInstanceOf($3,org.apache.camel.component.seda.SedaEndpoint.class)",
        "actions": [{
          "type": "InstrumentComponent",
          "direction": "Request",
          "componentTypeExpression": "removeSuffix(simpleClassName($3),\"Endpoint\")",
          "uriExpression": "$3.getEndpointUri()"
        },{
          "type": "FreeFormAction",
          "action": "collector().setDetail(\"btm_source\",\"apache-camel\")"
        }]
      },{
        "ruleName": "Apache Camel Outbound Component End",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeSent",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange",
           "org.apache.camel.Endpoint",
           "long"
        ],
        "location": "ENTRY",
        "condition": "!isInstanceOf($3,org.apache.camel.component.seda.SedaEndpoint.class)",
        "actions": [{
          "type": "InstrumentComponent",
          "direction": "Response",
          "componentTypeExpression": "removeSuffix(simpleClassName($3),\"Endpoint\")",
          "uriExpression": "$3.getEndpointUri()"
        }]
      },{
        "ruleName": "Apache Camel Inbound Consumer Start",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeCreated",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange"
        ],
        "location": "ENTRY",
        "condition": "isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.seda.SedaEndpoint.class)",
        "actions": [{
          "type": "InstrumentConsumer",
          "direction": "Request",
          "endpointTypeExpression": "removeSuffix(simpleClassName($2.getFromEndpoint()),\"Endpoint\")",
          "uriExpression": "$2.getFromEndpoint().getEndpointUri()",
          "idExpression": "$2.getProperty(\"Hawkular-btm\")"
        },{
          "type": "FreeFormAction",
          "action": "collector().setDetail(\"btm_source\",\"apache-camel\")"
        },{
          "type": "FreeFormAction",
          "action": "$2.removeProperty(\"Hawkular-btm\")"
        }]
      },{
        "ruleName": "Apache Camel Inbound Consumer End",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeDone",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange"
        ],
        "location": "ENTRY",
        "condition": "isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.seda.SedaEndpoint.class)",
        "actions": [{
          "type": "InstrumentConsumer",
          "direction": "Response",
          "endpointTypeExpression": "removeSuffix(simpleClassName($2.getFromEndpoint()),\"Endpoint\")",
          "uriExpression": "$2.getFromEndpoint().getEndpointUri()"
        }]
      },{
        "ruleName": "Apache Camel Outbound Producer Start",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeSending",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange",
           "org.apache.camel.Endpoint"
        ],
        "location": "ENTRY",
        "binds": [{
          "name": "id",
          "type": "java.lang.String",
          "expression": "createUUID()"
        }],
        "condition": "isInstanceOf($3,org.apache.camel.component.seda.SedaEndpoint.class)",
        "actions": [{
          "type": "InstrumentProducer",
          "direction": "Request",
          "endpointTypeExpression": "removeSuffix(simpleClassName($3),\"Endpoint\")",
          "uriExpression": "$3.getEndpointUri()",
          "idExpression": "id"
        },{
          "type": "FreeFormAction",
          "action": "collector().setDetail(\"btm_source\",\"apache-camel\")"
        },{
          "type": "FreeFormAction",
          "action": "$2.setProperty(\"Hawkular-btm\",id)"
        }]
      },{
        "ruleName": "Apache Camel Outbound Producer End",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeSent",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange",
           "org.apache.camel.Endpoint",
           "long"
        ],
        "location": "ENTRY",
        "condition": "isInstanceOf($3,org.apache.camel.component.seda.SedaEndpoint.class)",
        "actions": [{
          "type": "InstrumentProducer",
          "direction": "Response",
          "endpointTypeExpression": "removeSuffix(simpleClassName($3),\"Endpoint\")",
          "uriExpression": "$3.getEndpointUri()"
        }]
      }]
    }
  }
}