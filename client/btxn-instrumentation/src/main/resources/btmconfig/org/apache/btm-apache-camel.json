{
  "instrumentation": {
    "org.apache.camel": {
      "description": "Apache Camel instrumentation",
      "rules": [{
        "ruleName": "Apache Camel Inbound Component Start",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeCreated",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange"
        ],
        "location": "ENTRY",
        "condition": "$2.getFromEndpoint() != null && !isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.seda.SedaEndpoint.class) && !isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.direct.DirectEndpoint.class) && collector().session().activate($2.getFromEndpoint().getEndpointUri())",
        "actions": [{
          "type": "InstrumentComponent",
          "direction": "Request",
          "componentTypeExpression": "removeSuffix(simpleClassName($2.getFromEndpoint()),\"Endpoint\")",
          "uriExpression": "$2.getFromEndpoint().getEndpointUri()"
        },{
          "type": "FreeFormAction",
          "action": "collector().setDetail(\"btm_source\",\"org.apache.camel\")"
        }]
      },{
        "ruleName": "Apache Camel Inbound Component End",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeDone",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange"
        ],
        "location": "ENTRY",
        "condition": "collector().session().isActive() && $2.getFromEndpoint() != null && !isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.seda.SedaEndpoint.class) && !isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.direct.DirectEndpoint.class)",
        "actions": [{
          "type": "InstrumentComponent",
          "direction": "Response",
          "componentTypeExpression": "removeSuffix(simpleClassName($2.getFromEndpoint()),\"Endpoint\")",
          "uriExpression": "$2.getFromEndpoint().getEndpointUri()"
        }]
      },{
        "ruleName": "Apache Camel Outbound Component Start",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeSending",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange",
           "org.apache.camel.Endpoint"
        ],
        "location": "ENTRY",
        "condition": "$3 != null && !isInstanceOf($3,org.apache.camel.component.seda.SedaEndpoint.class) && !isInstanceOf($3,org.apache.camel.component.direct.DirectEndpoint.class) && collector().session().activate($3.getEndpointUri())",
        "actions": [{
          "type": "InstrumentComponent",
          "direction": "Request",
          "componentTypeExpression": "removeSuffix(simpleClassName($3),\"Endpoint\")",
          "uriExpression": "$3.getEndpointUri()"
        },{
          "type": "FreeFormAction",
          "action": "collector().setDetail(\"btm_source\",\"org.apache.camel\")"
        }]
      },{
        "ruleName": "Apache Camel Outbound Component End",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeSent",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange",
           "org.apache.camel.Endpoint",
           "long"
        ],
        "location": "ENTRY",
        "condition": "$3 != null && !isInstanceOf($3,org.apache.camel.component.seda.SedaEndpoint.class) && !isInstanceOf($3,org.apache.camel.component.direct.DirectEndpoint.class) && collector().session().isActive()",
        "actions": [{
          "type": "InstrumentComponent",
          "direction": "Response",
          "componentTypeExpression": "removeSuffix(simpleClassName($3),\"Endpoint\")",
          "uriExpression": "$3.getEndpointUri()"
        }]
      },{
        "ruleName": "Apache Camel Inbound Consumer Start",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeCreated",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange"
        ],
        "location": "ENTRY",
        "condition": "isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.seda.SedaEndpoint.class) && collector().session().activate($2.getFromEndpoint().getEndpointUri(),$2.getProperty(\"HawkularBTID\"))",
        "actions": [{
          "type": "FreeFormAction",
          "action": "collector().setName($2.getProperty(\"HawkularBTName\"))"
        },{
          "type": "InstrumentConsumer",
          "direction": "Request",
          "endpointTypeExpression": "removeSuffix(simpleClassName($2.getFromEndpoint()),\"Endpoint\")",
          "uriExpression": "$2.getFromEndpoint().getEndpointUri()",
          "idExpression": "$2.getProperty(\"HawkularBTID\")"
        },{
          "type": "FreeFormAction",
          "action": "collector().setDetail(\"btm_source\",\"org.apache.camel\")"
        },{
          "type": "FreeFormAction",
          "action": "$2.removeProperty(\"HawkularBTID\")"
        }]
      },{
        "ruleName": "Apache Camel Inbound Consumer End",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeDone",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange"
        ],
        "location": "ENTRY",
        "condition": "isInstanceOf($2.getFromEndpoint(),org.apache.camel.component.seda.SedaEndpoint.class) && collector().session().isActive()",
        "actions": [{
          "type": "InstrumentConsumer",
          "direction": "Response",
          "endpointTypeExpression": "removeSuffix(simpleClassName($2.getFromEndpoint()),\"Endpoint\")",
          "uriExpression": "$2.getFromEndpoint().getEndpointUri()"
        }]
      },{
        "ruleName": "Apache Camel Outbound Producer Start",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeSending",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange",
           "org.apache.camel.Endpoint"
        ],
        "location": "ENTRY",
        "binds": [{
          "name": "id",
          "type": "java.lang.String",
          "expression": "createUUID()"
        }],
        "condition": "isInstanceOf($3,org.apache.camel.component.seda.SedaEndpoint.class) && collector().session().activate($3.getEndpointUri())",
        "actions": [{
          "type": "InstrumentProducer",
          "direction": "Request",
          "endpointTypeExpression": "removeSuffix(simpleClassName($3),\"Endpoint\")",
          "uriExpression": "$3.getEndpointUri()",
          "idExpression": "id"
        },{
          "type": "FreeFormAction",
          "action": "collector().setDetail(\"btm_source\",\"org.apache.camel\")"
        },{
          "type": "FreeFormAction",
          "action": "$2.setProperty(\"HawkularBTID\",id)"
        },{
          "type": "FreeFormAction",
          "action": "$2.setProperty(\"HawkularBTName\",collector().getName())"
        }]
      },{
        "ruleName": "Apache Camel Outbound Producer End",
        "className": "org.apache.camel.util.EventHelper",
        "methodName": "notifyExchangeSent",
        "parameterTypes": [
           "org.apache.camel.CamelContext",
           "org.apache.camel.Exchange",
           "org.apache.camel.Endpoint",
           "long"
        ],
        "location": "ENTRY",
        "condition": "isInstanceOf($3,org.apache.camel.component.seda.SedaEndpoint.class) && collector().session().isActive()",
        "actions": [{
          "type": "InstrumentProducer",
          "direction": "Response",
          "endpointTypeExpression": "removeSuffix(simpleClassName($3),\"Endpoint\")",
          "uriExpression": "$3.getEndpointUri()"
        }]
      }]
    }
  }
}